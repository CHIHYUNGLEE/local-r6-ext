<!DOCTYPE html>
<html>
  <head>
    <title>Canvas</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      .canvas {
        background-color: hsla(0,0%,0%,1); 
		background: linear-gradient( to bottom, grey 0% , skyblue 75%, blue);
		margin: 0px;
		overflow: hidden;
		font-family: 'Molle', cursive;
      }
    </style>
  </head>

  <body>
    <canvas class="canvas"></canvas>

    <script>
      const canvas = document.querySelector('.canvas');
      const context = canvas.getContext('2d');
      const drops = [];
      const mousePos = { x: 0, y: 0 };
      var w = canvas.width = window.innerWidth, 
			h = canvas.height = window.innerHeight;
      let selectedBox; // 클릭된 box를 넣어놓은 변수

      context.font = 'bold 30px sans-serif';

      class Drop {
        constructor(index, x, y, speed, length) {
          this.index = index;
          this.x = x;
          this.y = y;
          this.speed = speed;
          this.length = length;
          this.draw();
        }

        draw() {
          context.beginPath();
          context.strokeStyle = '#dfdfdf';
          context.moveTo(this.x, this.y);
          context.lineTo(this.x, this.y + this.length);
          context.stroke();
          context.closePath();
        }
      }

      function render() {
        context.clearRect(0, 0, w, h);

        drops.forEach((drop) => {
          drop.y += drop.speed;
          if (drop.y > canvas.height) {
            drop.y = 0;
            drop.x = Math.random() * canvas.width;
            drop.speed = Math.random() * 20 + 1;//비 속도
            drop.length = Math.random() * 50 + 2;//비 크기
          }

          drop.draw();
        });

        requestAnimationFrame(render); //반복
        //console.log(drops);
      }

      let tempX, tempY, tempSpeed, tempLength;
      for (let i = 0; i < 200; i++) {
        tempX = Math.random() * canvas.width;
        tempY = Math.random() * canvas.height;
        tempSpeed = Math.random() * 3 + 1;
        tempLength = Math.random() * 5 + 2;

        drops.push(new Drop(i, tempX, tempY, tempSpeed, tempLength));
      }
      render();
    </script>
  </body>